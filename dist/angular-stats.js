!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("angular")):"function"==typeof define&&define.amd?define(["angular"],e):"object"==typeof exports?exports.AngularStats=e(require("angular")):t.AngularStats=e(t.angular)}(self,(t=>(()=>{"use strict";var e={526:e=>{e.exports=t}},n={};function o(t){var s=n[t];if(void 0!==s)return s.exports;var i=n[t]={exports:{}};return e[t](i,i.exports,o),i.exports}o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var s={};o.r(s),o.d(s,{AngularStats:()=>r,angularStats:()=>a});var i=o(526);class r{rootScope;document;window;timeout;logger;static $inject=["$rootScope","$document","$window","$timeout","$log"];scopesList;watchersList;componentsInfo;domElementsCount;nodeNameList;startingElement;digestInfo={duration:"0"};constructor(t,e,n,o,s){this.rootScope=t,this.document=e,this.window=n,this.timeout=o,this.logger=s,this.startingElement=this.document.find("app")}setStartingElement(t){this.startingElement=t}analyzeWebApp(){if(this.scopesList=[],this.watchersList=[],this.componentsInfo={},this.domElementsCount=0,this.nodeNameList={},!this.startingElement||0===this.startingElement.length)throw Error(this.startingElement+" is not a valid selector");return this.analizeScope(this.rootScope),this.detectFromElement(this.startingElement),this.calculateDigestDuration(),this.composeMessage()}composeMessage(){try{let t="GENERAL\n";t+="----------------------\n",t+="Tot scopes: "+this.scopesList.length+"\n",t+="Tot watchers: "+this.watchersList.length+"\n",t+="Tot DOM Elements: "+this.domElementsCount+"\n",t+="Digest duration: "+this.digestInfo.duration+" ms \n\n",t+="\nCOMPONENTS\n",t+="----------------------\n";for(const e in this.componentsInfo)t+="- "+e+"\ns: "+this.componentsInfo[e].scopesCount+", w: "+this.componentsInfo[e].watchers.length+"\n";t+="\n\nHTMLElement\n",t+="----------------------\n";for(const e in this.nodeNameList)t+=e+": "+this.nodeNameList[e]+"\n";return t}catch(t){return this.logger.error(t),"Error"}}analizeScope(t){try{if(-1===this.scopesList.indexOf(t)){this.scopesList.push(t);const e=t.$ctrl?t.$ctrl.name:t.name?t.name:"Unknown";void 0===this.componentsInfo[e]?this.componentsInfo[e]={name:e,scopesCount:1,watchers:[]}:this.componentsInfo[e].scopesCount++,i.forEach(t.$$watchers,(t=>{-1===this.watchersList.indexOf(t)&&this.watchersList.push(t),-1===this.componentsInfo[e].watchers.indexOf(t)&&this.componentsInfo[e].watchers.push(t)})),t.$$childHead&&this.analizeScope(t.$$childHead),t.$$childTail&&this.analizeScope(t.$$childTail),t.$$prevSibling&&this.analizeScope(t.$$prevSibling),t.$$nextSibling&&this.analizeScope(t.$$nextSibling)}}catch(t){this.logger.error(t)}}detectFromElement(t){try{this.domElementsCount++,i.element(t).scope()&&this.analizeScope(i.element(t).scope()),i.forEach(i.element(t).children(),(t=>{void 0===this.nodeNameList[t.nodeName]?this.nodeNameList[t.nodeName]=1:this.nodeNameList[t.nodeName]++,this.detectFromElement(i.element(t))}))}catch(t){this.logger.error(t)}}calculateDigestDuration(){var t=this;try{let e=0;const n=Object.getPrototypeOf(this.rootScope),o=n.$digest;n.$digest=function(){const n=t.getTime();for(var s=arguments.length,i=new Array(s),r=0;r<s;r++)i[r]=arguments[r];o.apply(t.rootScope,i),e=t.getTime()-n,t.digestInfo.duration=e.toFixed(2)}}catch(t){this.logger.error(t)}}getTime(){return performance?performance.now():this.getDate().getTime()}getDate(){return new Date}}const a=i.module("angular-stats",[]).service("AngularStats",r).name;return s})()));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEdBQ3hCNEIsSyIsInNvdXJjZXMiOlsid2VicGFjazovL0FuZ3VsYXJTdGF0cy93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vQW5ndWxhclN0YXRzL2V4dGVybmFsIHVtZCBcImFuZ3VsYXJcIiIsIndlYnBhY2s6Ly9Bbmd1bGFyU3RhdHMvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vQW5ndWxhclN0YXRzL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9Bbmd1bGFyU3RhdHMvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9Bbmd1bGFyU3RhdHMvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9Bbmd1bGFyU3RhdHMvLi9zcmMvYW5ndWxhci1zdGF0cy9hbmd1bGFyLXN0YXRzLnNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vQW5ndWxhclN0YXRzLy4vc3JjL2FuZ3VsYXItc3RhdHMvYW5ndWxhci1zdGF0cy5tb2R1bGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwiYW5ndWxhclwiKSk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXCJhbmd1bGFyXCJdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcIkFuZ3VsYXJTdGF0c1wiXSA9IGZhY3RvcnkocmVxdWlyZShcImFuZ3VsYXJcIikpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIkFuZ3VsYXJTdGF0c1wiXSA9IGZhY3Rvcnkocm9vdFtcImFuZ3VsYXJcIl0pO1xufSkoc2VsZiwgKF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzUyNl9fKSA9PiB7XG5yZXR1cm4gIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX181MjZfXzsiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsImltcG9ydCAqIGFzIGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUFuZ3VsYXJTdGF0cyB7XG4gIHNldFN0YXJ0aW5nRWxlbWVudChlbGVtZW50OiBKUUxpdGUpOiB2b2lkO1xuXG4gIGFuYWx5emVXZWJBcHAoKTogc3RyaW5nO1xufVxuXG5leHBvcnQgY2xhc3MgQW5ndWxhclN0YXRzIGltcGxlbWVudHMgSUFuZ3VsYXJTdGF0cyB7XG4gIHB1YmxpYyBzdGF0aWMgJGluamVjdCA9IFsnJHJvb3RTY29wZScsICckZG9jdW1lbnQnLCAnJHdpbmRvdycsICckdGltZW91dCcsICckbG9nJ107XG5cbiAgcHJpdmF0ZSBzY29wZXNMaXN0ITogbmcuSVNjb3BlW107XG4gIHByaXZhdGUgd2F0Y2hlcnNMaXN0ITogYW55W107IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICBwcml2YXRlIGNvbXBvbmVudHNJbmZvITogeyBba2V5OiBzdHJpbmddOiBhbnkgfTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5cbiAgcHJpdmF0ZSBkb21FbGVtZW50c0NvdW50ITogbnVtYmVyO1xuICBwcml2YXRlIG5vZGVOYW1lTGlzdCE6IHsgW2tleTogc3RyaW5nXTogYW55IH07IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuXG4gIHByaXZhdGUgc3RhcnRpbmdFbGVtZW50OiBKUUxpdGU7XG4gIHByaXZhdGUgZGlnZXN0SW5mbyA9IHsgZHVyYXRpb246ICcwJyB9O1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcm9vdFNjb3BlOiBuZy5JUm9vdFNjb3BlU2VydmljZSxcbiAgICAgICAgICAgICAgcHJpdmF0ZSBkb2N1bWVudDogbmcuSURvY3VtZW50U2VydmljZSxcbiAgICAgICAgICAgICAgcHJpdmF0ZSB3aW5kb3c6IG5nLklXaW5kb3dTZXJ2aWNlLFxuICAgICAgICAgICAgICBwcml2YXRlIHRpbWVvdXQ6IG5nLklUaW1lb3V0U2VydmljZSxcbiAgICAgICAgICAgICAgcHJpdmF0ZSBsb2dnZXI6IG5nLklMb2dTZXJ2aWNlKSB7XG4gICAgdGhpcy5zdGFydGluZ0VsZW1lbnQgPSB0aGlzLmRvY3VtZW50LmZpbmQoJ2FwcCcpO1xuICB9XG5cbiAgcHVibGljIHNldFN0YXJ0aW5nRWxlbWVudChlbGVtZW50OiBKUUxpdGUpOiB2b2lkIHtcbiAgICB0aGlzLnN0YXJ0aW5nRWxlbWVudCA9IGVsZW1lbnQ7XG4gIH1cblxuICBwdWJsaWMgYW5hbHl6ZVdlYkFwcCgpOiBzdHJpbmcge1xuICAgIHRoaXMuc2NvcGVzTGlzdCA9IFtdO1xuICAgIHRoaXMud2F0Y2hlcnNMaXN0ID0gW107XG4gICAgdGhpcy5jb21wb25lbnRzSW5mbyA9IHt9O1xuXG4gICAgdGhpcy5kb21FbGVtZW50c0NvdW50ID0gMDtcbiAgICB0aGlzLm5vZGVOYW1lTGlzdCA9IHt9O1xuXG4gICAgaWYgKCF0aGlzLnN0YXJ0aW5nRWxlbWVudCB8fCB0aGlzLnN0YXJ0aW5nRWxlbWVudC5sZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93IEVycm9yKHRoaXMuc3RhcnRpbmdFbGVtZW50ICsgJyBpcyBub3QgYSB2YWxpZCBzZWxlY3RvcicpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRoaXMuYW5hbGl6ZVNjb3BlKHRoaXMucm9vdFNjb3BlKTtcbiAgICAgIHRoaXMuZGV0ZWN0RnJvbUVsZW1lbnQodGhpcy5zdGFydGluZ0VsZW1lbnQpO1xuICAgICAgdGhpcy5jYWxjdWxhdGVEaWdlc3REdXJhdGlvbigpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNvbXBvc2VNZXNzYWdlKCk7XG4gIH1cblxuICBwcml2YXRlIGNvbXBvc2VNZXNzYWdlKCk6IHN0cmluZyB7XG4gICAgdHJ5IHtcbiAgICAgIGxldCBtZXggPSAnR0VORVJBTFxcbic7XG4gICAgICBtZXggKz0gJy0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cXG4nO1xuICAgICAgbWV4ICs9ICdUb3Qgc2NvcGVzOiAnICsgdGhpcy5zY29wZXNMaXN0Lmxlbmd0aCArICdcXG4nO1xuICAgICAgbWV4ICs9ICdUb3Qgd2F0Y2hlcnM6ICcgKyB0aGlzLndhdGNoZXJzTGlzdC5sZW5ndGggKyAnXFxuJztcbiAgICAgIG1leCArPSAnVG90IERPTSBFbGVtZW50czogJyArIHRoaXMuZG9tRWxlbWVudHNDb3VudCArICdcXG4nO1xuICAgICAgbWV4ICs9ICdEaWdlc3QgZHVyYXRpb246ICcgKyB0aGlzLmRpZ2VzdEluZm8uZHVyYXRpb24gKyAnIG1zIFxcblxcbic7XG5cbiAgICAgIG1leCArPSAnXFxuQ09NUE9ORU5UU1xcbic7XG4gICAgICBtZXggKz0gJy0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cXG4nO1xuICAgICAgZm9yIChjb25zdCBuYW1lIGluIHRoaXMuY29tcG9uZW50c0luZm8pIHtcbiAgICAgICAgbWV4ICs9ICctICcgKyBuYW1lICsgJ1xcbicgKyAnczogJyArIHRoaXMuY29tcG9uZW50c0luZm9bbmFtZV0uc2NvcGVzQ291bnQgKyAnLCB3OiAnICsgdGhpcy5jb21wb25lbnRzSW5mb1tuYW1lXS53YXRjaGVycy5sZW5ndGggKyAnXFxuJztcbiAgICAgIH1cblxuICAgICAgbWV4ICs9ICdcXG5cXG5IVE1MRWxlbWVudFxcbic7XG4gICAgICBtZXggKz0gJy0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cXG4nO1xuICAgICAgZm9yIChjb25zdCBub2RlTmFtZSBpbiB0aGlzLm5vZGVOYW1lTGlzdCkge1xuICAgICAgICBtZXggKz0gbm9kZU5hbWUgKyAnOiAnICsgdGhpcy5ub2RlTmFtZUxpc3Rbbm9kZU5hbWVdICsgJ1xcbic7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBtZXg7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICB0aGlzLmxvZ2dlci5lcnJvcihlKTtcbiAgICAgIHJldHVybiAnRXJyb3InO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYW5hbGl6ZVNjb3BlKGN1cnJlbnRTY29wZTogYW55KTogdm9pZCB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHRyeSB7XG4gICAgICBpZiAodGhpcy5zY29wZXNMaXN0LmluZGV4T2YoY3VycmVudFNjb3BlKSA9PT0gLTEpIHtcbiAgICAgICAgdGhpcy5zY29wZXNMaXN0LnB1c2goY3VycmVudFNjb3BlKTtcblxuICAgICAgICBjb25zdCBuYW1lID0gY3VycmVudFNjb3BlWyckY3RybCddID8gY3VycmVudFNjb3BlWyckY3RybCddWyduYW1lJ10gOiAoY3VycmVudFNjb3BlWyduYW1lJ10gPyBjdXJyZW50U2NvcGVbJ25hbWUnXSA6ICdVbmtub3duJyk7XG4gICAgICAgIGlmICh0aGlzLmNvbXBvbmVudHNJbmZvW25hbWVdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB0aGlzLmNvbXBvbmVudHNJbmZvW25hbWVdID0ge1xuICAgICAgICAgICAgbmFtZSwgc2NvcGVzQ291bnQ6IDEsIHdhdGNoZXJzOiBbXSxcbiAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuY29tcG9uZW50c0luZm9bbmFtZV0uc2NvcGVzQ291bnQrKztcbiAgICAgICAgfVxuXG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaChjdXJyZW50U2NvcGVbJyQkd2F0Y2hlcnMnXSwgKHdhdGNoZXIpID0+IHtcbiAgICAgICAgICBpZiAodGhpcy53YXRjaGVyc0xpc3QuaW5kZXhPZih3YXRjaGVyKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMud2F0Y2hlcnNMaXN0LnB1c2god2F0Y2hlcik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHRoaXMuY29tcG9uZW50c0luZm9bbmFtZV0ud2F0Y2hlcnMuaW5kZXhPZih3YXRjaGVyKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50c0luZm9bbmFtZV0ud2F0Y2hlcnMucHVzaCh3YXRjaGVyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChjdXJyZW50U2NvcGVbJyQkY2hpbGRIZWFkJ10pIHtcbiAgICAgICAgICB0aGlzLmFuYWxpemVTY29wZShjdXJyZW50U2NvcGVbJyQkY2hpbGRIZWFkJ10pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGN1cnJlbnRTY29wZVsnJCRjaGlsZFRhaWwnXSkge1xuICAgICAgICAgIHRoaXMuYW5hbGl6ZVNjb3BlKGN1cnJlbnRTY29wZVsnJCRjaGlsZFRhaWwnXSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY3VycmVudFNjb3BlWyckJHByZXZTaWJsaW5nJ10pIHtcbiAgICAgICAgICB0aGlzLmFuYWxpemVTY29wZShjdXJyZW50U2NvcGVbJyQkcHJldlNpYmxpbmcnXSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY3VycmVudFNjb3BlWyckJG5leHRTaWJsaW5nJ10pIHtcbiAgICAgICAgICB0aGlzLmFuYWxpemVTY29wZShjdXJyZW50U2NvcGVbJyQkbmV4dFNpYmxpbmcnXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGUpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZGV0ZWN0RnJvbUVsZW1lbnQoZWxlbWVudDogSlFMaXRlKTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuZG9tRWxlbWVudHNDb3VudCsrO1xuICAgICAgaWYgKGFuZ3VsYXIuZWxlbWVudChlbGVtZW50KS5zY29wZSgpKSB7XG4gICAgICAgIHRoaXMuYW5hbGl6ZVNjb3BlKGFuZ3VsYXIuZWxlbWVudChlbGVtZW50KS5zY29wZSgpKTtcbiAgICAgIH1cblxuICAgICAgYW5ndWxhci5mb3JFYWNoKGFuZ3VsYXIuZWxlbWVudChlbGVtZW50KS5jaGlsZHJlbigpLCAoY2hpbGRFbGVtZW50OiBIVE1MRWxlbWVudCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5ub2RlTmFtZUxpc3RbY2hpbGRFbGVtZW50Lm5vZGVOYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdGhpcy5ub2RlTmFtZUxpc3RbY2hpbGRFbGVtZW50Lm5vZGVOYW1lXSA9IDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5ub2RlTmFtZUxpc3RbY2hpbGRFbGVtZW50Lm5vZGVOYW1lXSsrO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGV0ZWN0RnJvbUVsZW1lbnQoYW5ndWxhci5lbGVtZW50KGNoaWxkRWxlbWVudCkpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICB0aGlzLmxvZ2dlci5lcnJvcihlKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNhbGN1bGF0ZURpZ2VzdER1cmF0aW9uKCk6IHZvaWQge1xuICAgIHRyeSB7XG4gICAgICBsZXQgZHVyYXRpb24gPSAwO1xuICAgICAgY29uc3Qgc2NvcGVQcm90b3R5cGUgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcy5yb290U2NvcGUpO1xuICAgICAgY29uc3QgYW5ndWxhckRpZ2VzdCA9IHNjb3BlUHJvdG90eXBlLiRkaWdlc3Q7XG5cbiAgICAgIHNjb3BlUHJvdG90eXBlLiRkaWdlc3QgPSAoLi4uYXJnczogYW55W10pID0+IHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5nZXRUaW1lKCk7XG4gICAgICAgIGFuZ3VsYXJEaWdlc3QuYXBwbHkodGhpcy5yb290U2NvcGUsIGFyZ3MpO1xuICAgICAgICBkdXJhdGlvbiA9IHRoaXMuZ2V0VGltZSgpIC0gc3RhcnQ7XG4gICAgICAgIHRoaXMuZGlnZXN0SW5mby5kdXJhdGlvbiA9IGR1cmF0aW9uLnRvRml4ZWQoMik7XG4gICAgICB9O1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoZSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRUaW1lKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHBlcmZvcm1hbmNlID8gcGVyZm9ybWFuY2Uubm93KCkgOiB0aGlzLmdldERhdGUoKS5nZXRUaW1lKCk7XG4gIH1cblxuICBwcml2YXRlIGdldERhdGUoKTogRGF0ZSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKCk7XG4gIH1cbn1cbiIsImltcG9ydCAqIGFzIGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgeyBBbmd1bGFyU3RhdHMgfSBmcm9tICcuL2FuZ3VsYXItc3RhdHMuc2VydmljZSc7XG5cbmV4cG9ydCBjb25zdCBhbmd1bGFyU3RhdHMgPSBhbmd1bGFyLm1vZHVsZSgnYW5ndWxhci1zdGF0cycsIFtdKVxuICAuc2VydmljZSgnQW5ndWxhclN0YXRzJywgQW5ndWxhclN0YXRzKVxuICAubmFtZTtcbiJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJyZXF1aXJlIiwiZGVmaW5lIiwiYW1kIiwic2VsZiIsIl9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzUyNl9fIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImQiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsIkFuZ3VsYXJTdGF0cyIsInJvb3RTY29wZSIsImRvY3VtZW50Iiwid2luZG93IiwidGltZW91dCIsImxvZ2dlciIsInN0YXRpYyIsInNjb3Blc0xpc3QiLCJ3YXRjaGVyc0xpc3QiLCJjb21wb25lbnRzSW5mbyIsImRvbUVsZW1lbnRzQ291bnQiLCJub2RlTmFtZUxpc3QiLCJzdGFydGluZ0VsZW1lbnQiLCJkaWdlc3RJbmZvIiwiZHVyYXRpb24iLCJjb25zdHJ1Y3RvciIsInRoaXMiLCJmaW5kIiwic2V0U3RhcnRpbmdFbGVtZW50IiwiZWxlbWVudCIsImFuYWx5emVXZWJBcHAiLCJsZW5ndGgiLCJFcnJvciIsImFuYWxpemVTY29wZSIsImRldGVjdEZyb21FbGVtZW50IiwiY2FsY3VsYXRlRGlnZXN0RHVyYXRpb24iLCJjb21wb3NlTWVzc2FnZSIsIm1leCIsIm5hbWUiLCJzY29wZXNDb3VudCIsIndhdGNoZXJzIiwibm9kZU5hbWUiLCJlIiwiZXJyb3IiLCJjdXJyZW50U2NvcGUiLCJpbmRleE9mIiwicHVzaCIsImFuZ3VsYXIiLCJ3YXRjaGVyIiwic2NvcGUiLCJjaGlsZHJlbiIsImNoaWxkRWxlbWVudCIsIl90aGlzIiwic2NvcGVQcm90b3R5cGUiLCJnZXRQcm90b3R5cGVPZiIsImFuZ3VsYXJEaWdlc3QiLCIkZGlnZXN0Iiwic3RhcnQiLCJnZXRUaW1lIiwiX2xlbiIsImFyZ3VtZW50cyIsImFyZ3MiLCJBcnJheSIsIl9rZXkiLCJhcHBseSIsInRvRml4ZWQiLCJwZXJmb3JtYW5jZSIsIm5vdyIsImdldERhdGUiLCJEYXRlIiwiYW5ndWxhclN0YXRzIiwic2VydmljZSJdLCJzb3VyY2VSb290IjoiIn0=
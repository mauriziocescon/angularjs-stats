!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("angular")):"function"==typeof define&&define.amd?define(["angular"],e):"object"==typeof exports?exports.AngularStats=e(require("angular")):t.AngularStats=e(t.angular)}(self,(t=>(()=>{"use strict";var e={874:e=>{e.exports=t}},n={};function o(t){var i=n[t];if(void 0!==i)return i.exports;var r=n[t]={exports:{}};return e[t](r,r.exports,o),r.exports}o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var i={};return(()=>{o.r(i),o.d(i,{AngularStats:()=>a,angularStats:()=>c});var t=o(874);function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,s(o.key),o)}}function r(t,e,n){return(e=s(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t){var n=function(t,n){if("object"!==e(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,"string");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===e(n)?n:String(n)}var a=function(){function e(t,n,o,i,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"rootScope",void 0),r(this,"document",void 0),r(this,"window",void 0),r(this,"timeout",void 0),r(this,"logger",void 0),r(this,"scopesList",void 0),r(this,"watchersList",void 0),r(this,"componentsInfo",void 0),r(this,"domElementsCount",void 0),r(this,"nodeNameList",void 0),r(this,"startingElement",void 0),r(this,"digestInfo",{duration:"0"}),this.rootScope=t,this.document=n,this.window=o,this.timeout=i,this.logger=s,this.startingElement=this.document.find("app")}var o,i;return o=e,i=[{key:"setStartingElement",value:function(t){this.startingElement=t}},{key:"analyzeWebApp",value:function(){if(this.scopesList=[],this.watchersList=[],this.componentsInfo={},this.domElementsCount=0,this.nodeNameList={},!this.startingElement||0===this.startingElement.length)throw Error(this.startingElement+" is not a valid selector");return this.analizeScope(this.rootScope),this.detectFromElement(this.startingElement),this.calculateDigestDuration(),this.composeMessage()}},{key:"composeMessage",value:function(){try{var t="GENERAL\n";for(var e in t+="----------------------\n",t+="Tot scopes: "+this.scopesList.length+"\n",t+="Tot watchers: "+this.watchersList.length+"\n",t+="Tot DOM Elements: "+this.domElementsCount+"\n",t+="Digest duration: "+this.digestInfo.duration+" ms \n\n",t+="\nCOMPONENTS\n",t+="----------------------\n",this.componentsInfo)t+="- "+e+"\ns: "+this.componentsInfo[e].scopesCount+", w: "+this.componentsInfo[e].watchers.length+"\n";for(var n in t+="\n\nHTMLElement\n",t+="----------------------\n",this.nodeNameList)t+=n+": "+this.nodeNameList[n]+"\n";return t}catch(t){return this.logger.error(t),"Error"}}},{key:"analizeScope",value:function(e){var n=this;try{if(-1===this.scopesList.indexOf(e)){this.scopesList.push(e);var o=e.$ctrl?e.$ctrl.name:e.name?e.name:"Unknown";void 0===this.componentsInfo[o]?this.componentsInfo[o]={name:o,scopesCount:1,watchers:[]}:this.componentsInfo[o].scopesCount++,t.forEach(e.$$watchers,(function(t){-1===n.watchersList.indexOf(t)&&n.watchersList.push(t),-1===n.componentsInfo[o].watchers.indexOf(t)&&n.componentsInfo[o].watchers.push(t)})),e.$$childHead&&this.analizeScope(e.$$childHead),e.$$childTail&&this.analizeScope(e.$$childTail),e.$$prevSibling&&this.analizeScope(e.$$prevSibling),e.$$nextSibling&&this.analizeScope(e.$$nextSibling)}}catch(t){this.logger.error(t)}}},{key:"detectFromElement",value:function(e){var n=this;try{this.domElementsCount++,t.element(e).scope()&&this.analizeScope(t.element(e).scope()),t.forEach(t.element(e).children(),(function(e){void 0===n.nodeNameList[e.nodeName]?n.nodeNameList[e.nodeName]=1:n.nodeNameList[e.nodeName]++,n.detectFromElement(t.element(e))}))}catch(t){this.logger.error(t)}}},{key:"calculateDigestDuration",value:function(){var t=this;try{var e=0,n=Object.getPrototypeOf(this.rootScope),o=n.$digest;n.$digest=function(){for(var n=t.getTime(),i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];o.apply(t.rootScope,r),e=t.getTime()-n,t.digestInfo.duration=e.toFixed(2)}}catch(t){this.logger.error(t)}}},{key:"getTime",value:function(){return performance?performance.now():this.getDate().getTime()}},{key:"getDate",value:function(){return new Date}}],i&&n(o.prototype,i),Object.defineProperty(o,"prototype",{writable:!1}),e}();r(a,"$inject",["$rootScope","$document","$window","$timeout","$log"]);var c=t.module("angular-stats",[]).service("AngularStats",a).name})(),i})()));